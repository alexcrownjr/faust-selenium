[supervisord]
nodaemon=true
environment=
    PYTHONPATH="$PYTHONPATH:crawler",
    BROWSER_PARAMS_FILE="config/browser_params.json",
    FIREFOX_BINARY_PATH="/home/sbird/faust-selenium/app/firefox-bin/firefox-bin",
    EXTENSION_PATH="/home/sbird/faust-selenium/app/openwpm.xpi",
    SITE_LIST="lists/alexatop1k.csv",
    DISPLAY=":99",



## Parallel crawler 1

[program:geckodriver-log-reader-1]
command=faust -A crawler.geckodriver_log_reader worker -p 6161
stdout_logfile=logs/crawler_1/geckodriver_out.log
stderr_logfile=logs/crawler_1/geckodriver_err.log
environment=
    MANAGER_PARAMS_FILE="config/manager_params_test.json",
    CRAWL_NAME="gcp-parallel-whead-kafka-test-1",
    DATABASE_NAME="data/crawl-data-test-1.sqlite",
    GECKODRIVER_LOG_FILE="logs/crawler_1/geckodriver.log"

# -- crawler 1 - 1
[program:crawler-1-1]
command=faust -A crawler.crawler worker -p 6181
stdout_logfile=logs/crawler_1/crawler1_out.log
stderr_logfile=logs/crawler_1/crawler1_err.log
environment=
    WS_PORT="6101",
    MANAGER_PARAMS_FILE="config/manager_params_test.json",
    CRAWL_NAME="gcp-parallel-whead-kafka-test-1",
    DATABASE_NAME="data/crawl-data-test-1.sqlite",
    GECKODRIVER_LOG_FILE="logs/crawler_1/geckodriver.log"
[program:websocket-1-1]
command=faust -A crawler.websocket worker -p 6191
stdout_logfile=logs/crawler_1/ws1_out.log
stderr_logfile=logs/crawler_1/ws1_err.log
environment=
    WS_PORT="6101",
    MANAGER_PARAMS_FILE="config/manager_params_test.json",
    CRAWL_NAME="gcp-parallel-whead-kafka-test-1",
    DATABASE_NAME="data/crawl-data-test-1.sqlite",
    GECKODRIVER_LOG_FILE="logs/crawler_1/geckodriver.log"

# -- crawler 1 - 2
[program:crawler-1-2]
command=faust -A crawler.crawler worker -p 6182
stdout_logfile=logs/crawler_1/crawler2_out.log
stderr_logfile=logs/crawler_1/crawler2_err.log
environment=
    WS_PORT="6102",
    MANAGER_PARAMS_FILE="config/manager_params_test.json",
    CRAWL_NAME="gcp-parallel-whead-kafka-test-1",
    DATABASE_NAME="data/crawl-data-test-1.sqlite",
    GECKODRIVER_LOG_FILE="logs/crawler_1/geckodriver.log"
[program:websocket-1-2]
command=faust -A crawler.websocket worker -p 6192
stdout_logfile=logs/crawler_1/ws2_out.log
stderr_logfile=logs/crawler_1/ws2_err.log
environment=
    WS_PORT="6102",
    MANAGER_PARAMS_FILE="config/manager_params_test.json",
    CRAWL_NAME="gcp-parallel-whead-kafka-test-1",
    DATABASE_NAME="data/crawl-data-test-1.sqlite",
    GECKODRIVER_LOG_FILE="logs/crawler_1/geckodriver.log"

[program:producer-1]
command=faust -A crawler.producer_test worker -p 6171
priority=300
stdout_logfile=logs/crawler_1/producer_out.log
stderr_logfile=logs/crawler_1/producer_err.log
environment=
    MANAGER_PARAMS_FILE="config/manager_params_test.json",
    CRAWL_NAME="gcp-parallel-whead-kafka-test-1",
    DATABASE_NAME="data/crawl-data-test-1.sqlite",

## Parallel crawler 2

[program:geckodriver-log-reader-2]
command=faust -A crawler.geckodriver_log_reader worker -p 6261
stdout_logfile=logs/crawler_2/geckodriver_out.log
stderr_logfile=logs/crawler_2/geckodriver_err.log
environment=
    MANAGER_PARAMS_FILE="config/manager_params_test.json",
    CRAWL_NAME="gcp-parallel-whead-kafka-test-2",
    DATABASE_NAME="data/crawl-data-test-2.sqlite",
    GECKODRIVER_LOG_FILE="logs/crawler_2/geckodriver.log"

# -- crawler 2 - 1
[program:crawler-2-1]
command=faust -A crawler.crawler worker -p 6281
stdout_logfile=logs/crawler_2/crawler1_out.log
stderr_logfile=logs/crawler_2/crawler1_err.log
environment=
    WS_PORT="6201",
    MANAGER_PARAMS_FILE="config/manager_params_test.json",
    CRAWL_NAME="gcp-parallel-whead-kafka-test-2",
    DATABASE_NAME="data/crawl-data-test-2.sqlite",
    GECKODRIVER_LOG_FILE="logs/crawler_2/geckodriver.log"
[program:websocket-2-1]
command=faust -A crawler.websocket worker -p 6291
stdout_logfile=logs/crawler_2/ws1_out.log
stderr_logfile=logs/crawler_2/ws1_err.log
environment=
    WS_PORT="6201",
    MANAGER_PARAMS_FILE="config/manager_params_test.json",
    CRAWL_NAME="gcp-parallel-whead-kafka-test-2",
    DATABASE_NAME="data/crawl-data-test-2.sqlite",
    GECKODRIVER_LOG_FILE="logs/crawler_2/geckodriver.log"

# -- crawler 2 - 2
[program:crawler-2-2]
command=faust -A crawler.crawler worker -p 6282
stdout_logfile=logs/crawler_2/crawler2_out.log
stderr_logfile=logs/crawler_2/crawler2_err.log
environment=
    WS_PORT="6202",
    MANAGER_PARAMS_FILE="config/manager_params_test.json",
    CRAWL_NAME="gcp-parallel-whead-kafka-test-2",
    DATABASE_NAME="data/crawl-data-test-2.sqlite",
    GECKODRIVER_LOG_FILE="logs/crawler_2/geckodriver.log"
[program:websocket-2-2]
command=faust -A crawler.websocket worker -p 6292
stdout_logfile=logs/crawler_2/ws2_out.log
stderr_logfile=logs/crawler_2/ws2_err.log
environment=
    WS_PORT="6202",
    MANAGER_PARAMS_FILE="config/manager_params_test.json",
    CRAWL_NAME="gcp-parallel-whead-kafka-test-2",
    DATABASE_NAME="data/crawl-data-test-2.sqlite",
    GECKODRIVER_LOG_FILE="logs/crawler_2/geckodriver.log"

[program:producer-2]
command=faust -A crawler.producer_test worker -p 6271
priority=300
stdout_logfile=logs/crawler_2/producer_out.log
stderr_logfile=logs/crawler_2/producer_err.log
environment=
    MANAGER_PARAMS_FILE="config/manager_params_test.json",
    CRAWL_NAME="gcp-parallel-whead-kafka-test-2",
    DATABASE_NAME="data/crawl-data-test-2.sqlite",

